# Propulsion Data Schema - Q100_STD01
# TFA Domain: CQH (Cryogenics/H2), PPP (Propulsion)
# UTCS: utcs://AMPEL360-AIR-T/BWB-H2-Hy-E/Q100_STD01

schema_version: "1.0"
tfa_domain: ["CQH", "PPP"]
ata_chapter: ["28", "72", "73", "78"]
reference_standard: "EASA SC-H2 Draft v0.3"

# Unit System
units_system: "SI"
units:
  mass: "kg"
  volume: "m³"
  pressure: "Pa" # or "bar" for convenience
  temperature: "K"
  power: "W" # or "kW" for convenience
  thrust: "N"
  mass_flow: "kg/s"
  energy_density: "MJ/kg"

# Hydrogen Properties
hydrogen_properties:
  molecular_weight_kg_mol: 0.002016
  lower_heating_value_mj_kg: 120.0
  higher_heating_value_mj_kg: 142.0
  critical_temperature_k: 33.19
  critical_pressure_pa: 1.3e6
  boiling_point_1bar_k: 20.28
  liquid_density_20k_kg_m3: 70.8
  gas_density_stp_kg_m3: 0.08988

# LH₂ Tank Configuration
lh2_tank:
  type: "Cylindrical, vacuum-insulated"
  capacity_kg: 6800
  capacity_tolerance_kg: ±100
  volume_m3: 96.0
  insulation: "Multi-layer insulation (MLI)"
  layers_mli: 40
  vacuum_pressure_pa: 1e-4
  operating_pressure_bar: [5, 8]
  design_pressure_bar: 12
  material:
    inner_tank: "Aluminum 2219-T87"
    outer_shell: "CFRP composite"
  
  thermal_performance:
    boil_off_rate_percent_day: 0.3
    heat_leak_w: 25
    stratification_mixing: "Natural convection"
  
  safety:
    leak_rate_max_kg_s: 1e-6
    burst_pressure_bar: 20
    fire_resistance_min: 15
    vent_capacity_kg_s: 0.5

# Fuel Cell Stack
fuel_cell:
  type: "PEM (Proton Exchange Membrane)"
  rated_power_kw: 2400
  num_stacks: 6
  power_per_stack_kw: 400
  
  operating_conditions:
    temperature_k: [333, 353]  # 60–80°C
    pressure_h2_bar: 3.0
    pressure_air_bar: 3.0
    stoichiometry_h2: 1.2
    stoichiometry_o2: 2.0
  
  performance:
    efficiency_nominal: 0.55
    efficiency_map: "power_dependent"
    voltage_per_cell_v: 0.65
    current_density_a_cm2: 1.2
  
  durability:
    design_life_h: 20000
    degradation_rate_percent_1000h: 0.5
  
  cooling:
    coolant: "Ethylene glycol 50/50"
    flow_rate_l_min: 120
    inlet_temperature_k: 333
    outlet_temperature_k: 343

# Electric Motors
electric_motor:
  num_motors: 6
  power_per_motor_kw: 400
  rated_rpm: 4500
  max_rpm: 5000
  
  efficiency:
    nominal: 0.95
    map_file: "motor_efficiency_map.csv"
  
  cooling:
    method: "Liquid-cooled stator"
    coolant: "Ethylene glycol 50/50"
    flow_rate_l_min: 15
  
  control:
    type: "Inverter-driven PMSM"
    voltage_dc_v: 800
    current_max_a: 600
    control_mode: "Torque command"

# Ducted Fans
ducted_fan:
  num_fans: 6
  diameter_m: 1.8
  blade_count: 5
  design_thrust_n: 14000
  max_thrust_n: 18000
  
  performance:
    static_efficiency: 0.82
    cruise_efficiency: 0.85
    tip_speed_m_s: 250
  
  noise:
    target_epnl_db: 85
    tone_correction_db: -3

# Thermal Management System
thermal_management:
  heat_rejection_total_kw: 1200
  
  loops:
    - id: "fuel_cell_cooling"
      heat_load_kw: 900
      coolant: "Ethylene glycol 50/50"
      flow_rate_l_min: 300
    - id: "motor_cooling"
      heat_load_kw: 120
      coolant: "Ethylene glycol 50/50"
      flow_rate_l_min: 90
    - id: "power_electronics"
      heat_load_kw: 180
      coolant: "Ethylene glycol 50/50"
      flow_rate_l_min: 60
  
  radiators:
    type: "Ram-air heat exchangers"
    location: "Nacelle inlets"
    total_area_m2: 15.0

# Safety Limits (per EASA SC-H2)
safety_limits:
  h2_concentration_max_percent: 1.0  # 25% of LEL
  leak_detection_threshold_ppm: 100
  emergency_vent_rate_kg_s: 2.0
  fire_suppression: "Halon 1301 (legacy) or water mist"
  electrical_isolation_kohm: 500

# Validation Checks
validation:
  - check: "Boil-off rate ≤ 0.3% per day"
    severity: "error"
  - check: "Fuel cell efficiency ≥ 0.52"
    severity: "warning"
  - check: "Motor efficiency ≥ 0.93"
    severity: "warning"
  - check: "H₂ leak rate < 1e-6 kg/s"
    severity: "error"

# Example Configuration
example:
  component_id: "BWB-H2-TANK-PRIMARY-001"
  tfa_domain: "CQH"
  ata_chapter: "28"
  mass_empty_kg: 850
  mass_full_kg: 7650
  h2_capacity_kg: 6800
  insulation_performance_w_m2_k: 0.0003
  last_inspection: "2025-09-30"
  next_inspection: "2026-03-30"

# Traceability
traceability:
  requirements: "REQ-AMPEL-001, REQ-AMPEL-002, REQ-AMPEL-005"
  evidence: "H2_LEAK_TEST_REPORT_v2.3.pdf, BOILOFF_ANALYSIS_v2.3.xlsx"
  standards: "EASA SC-H2, SAE AS6858"

# JSON Schema
json_schema:
  type: "object"
  required: ["component_id", "tfa_domain", "ata_chapter"]
  properties:
    component_id:
      type: "string"
    tfa_domain:
      type: "string"
      enum: ["CQH", "PPP"]
    ata_chapter:
      type: "string"
      enum: ["28", "72", "73", "78"]
